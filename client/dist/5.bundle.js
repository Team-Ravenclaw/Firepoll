(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[5],{

/***/ "./client/src/managementClient/dashboard.jsx":
/*!***************************************************!*\
  !*** ./client/src/managementClient/dashboard.jsx ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactModal = __webpack_require__(/*! react-modal */ \"./node_modules/react-modal/lib/index.js\");\n\nvar _reactModal2 = _interopRequireDefault(_reactModal);\n\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/es/index.js\");\n\nvar _poll = __webpack_require__(/*! ./poll */ \"./client/src/managementClient/poll.jsx\");\n\nvar _poll2 = _interopRequireDefault(_poll);\n\nvar _axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _firepollManagementClient = __webpack_require__(/*! ../firepollManagementClient */ \"./client/src/firepollManagementClient.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n_reactModal2.default.setAppElement('#app');\n\nvar customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\n\nvar sortByDateDescending = function sortByDateDescending(arr) {\n  return arr.sort(function (a, b) {\n    if (a.timeMS < b.timeMS) return 1;else return -1;\n  });\n};\n\nvar destructurePoll = function destructurePoll(poll) {\n  var returnObj = {};\n  returnObj.poll = {\n    _id: poll._id,\n    data: {\n      author: poll.author,\n      num_questions: poll.questions.length,\n      start_time: \"some Date\",\n      title: poll.title,\n      winning_response: null\n    }\n  };\n\n  var questions = poll.questions.map(function (question) {\n    var answers = question.answers.map(function (answer, i) {\n      var answerObj = {\n        id: answer._id,\n        position: i + 1,\n        value: answer.choice\n      };\n      return answerObj;\n    });\n    var obj = {\n      answers: answers,\n      display_results: true,\n      num_responses: question.answers.length,\n      question_title: question.question,\n      total_voting_time: 10000,\n      type: \"multiple-choice\"\n    };\n    var questionWrapper = {\n      id: question._id,\n      data: obj\n    };\n    return questionWrapper;\n  });\n  returnObj.questions = questions;\n  return returnObj;\n};\n\nvar Dashboard = function (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    _classCallCheck(this, Dashboard);\n\n    var _this = _possibleConstructorReturn(this, (Dashboard.__proto__ || Object.getPrototypeOf(Dashboard)).call(this, props));\n\n    _this.openModal = function () {\n      _this.setState({ modalIsOpen: true });\n    };\n\n    _this.afterOpenModal = function () {\n      // references are now sync'd and can be accessed.\n      // this.subtitle.style.color = '#f00';\n    };\n\n    _this.closeModal = function () {\n      _this.setState({ modalIsOpen: false });\n    };\n\n    _this.sendTexts = function () {\n      console.log('texting out links!', _this.state.phoneNumbers, _this.state.currentLink);\n      var phoneNumber = _this.state.phoneNumbers,\n          link = _this.state.currentLink;\n      if (phoneNumber.length >= 10) {\n        _axios2.default.post('/notifications', { link: link, phoneNumber: phoneNumber }).then(function (data) {\n          console.log(data);\n          _this.setState({ phoneNumbers: '' });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }\n    };\n\n    _this.setCurrentLink = function (currentLink) {\n      _this.setState({ currentLink: currentLink });\n    };\n\n    _this.getPolls = function () {\n      _axios2.default.get('/polls/user/' + _this.props.userId).then(function (res) {\n        console.log('users polls: ', res.data);\n        _this.setState({ allPolls: res.data, filteredPolls: res.data });\n      }).catch(function (err) {\n        console.error(err);\n      });\n    };\n\n    _this.close = function (index) {\n      var poll = _this.state.filteredPolls[index];\n      _axios2.default.put('/polls/close/' + poll._id, poll).then(function (res) {\n        _firepollManagementClient.firepoll.close(poll);\n        _firepollManagementClient.realTimeDB.ref('/polls/' + poll._id).remove().catch(function (err) {\n          console.error('deleting poll from realTimeDB', err);\n        });\n        console.log(\"closed poll \", poll.title);\n        _this.getPolls();\n        console.log('Saved: ', res.data);\n      }).catch(function (err) {\n        console.error('Closing Poll: ', err);\n      });\n    };\n\n    _this.deploy = function (index) {\n      // formats the poll\n      var destructured = destructurePoll(_this.state.filteredPolls[index]);\n      console.log('destructured: ', destructured);\n      // should send poll to firestore\n      _firepollManagementClient.firepoll.run(destructured);\n      // send db request to update poll to `active` = true,\n      _axios2.default.put('/polls/' + destructured.poll._id, { active: true }).then(function () {\n        console.log('updated ', destructured.poll.data.title);\n      }).catch(function (err) {\n        console.error('Updating poll in MongoDB to active:true :', err);\n      });\n      // should trigger a rerender of the polls\n      _this.setState(function (prevState, props) {\n        prevState.filteredPolls[index].active = true;\n        return prevState;\n      });\n    };\n\n    _this.filterPolls = function (active, completed) {\n      var filtered = _this.state.allPolls.filter(function (poll) {\n        return poll.completed === completed && poll.active === active;\n      });\n      _this.setState({ filteredPolls: filtered });\n    };\n\n    _this.deletePoll = function (id) {\n      console.log('deleting poll that was created but not deployed! id:', id);\n      // remove from mongo db\n      _axios2.default.delete('/polls/' + id).then(function (res) {\n        _this.getPolls();\n        _firepollManagementClient.firepoll.unstage(pollId).then(function (data) {\n          return console.log(data);\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }).catch(function (err) {\n        console.error(err);\n      });\n    };\n\n    _this.state = {\n      allPolls: [],\n      filteredPolls: [],\n      userFilterInput: '',\n      modalIsOpen: false,\n      phoneNumbers: '',\n      currentLink: null\n    };\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: 'componentDidMount',\n\n\n    // When componentDidMount runs the first time, the props are not set yet, so that our db call would fail\n    // The interval is a VERY hacky solution to the problem\n    value: function componentDidMount() {\n      console.log(this.props);\n      var that = this;\n      var interval = setInterval(function () {\n        console.log('running interval');\n        if (that.props.userId !== null) {\n          that.getPolls();\n          clearInterval(interval);\n        }\n      }, 200);\n    }\n\n    // ONE WAY TO SOLVE IT, KINDA RISKY\n    /*shouldComponentUpdate(nextProps, nextState) {\r\n      if(nextProps === this.props && this.state.allPolls.length > 0) {\r\n        if(nextState.filteredPolls !== nextState.allPolls) {\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n      componentDidUpdate() {\r\n      this.getPolls();\r\n    }*/\n\n    // THIS SHOULD RUN, BUT IT NEVER GETS RUN\n\n  }, {\n    key: 'UNSAFE_componentWillReceiveProps',\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      console.log('will receive props', this.props);\n      //this.getPolls(this.props.userId);\n    }\n  }, {\n    key: 'handleInput',\n\n\n    // unstagePoll = id => {\n    //   firepoll.unstage(pollId)\n    //   .then(data => console.log(data))\n    //   .catch(err => console.log(err));\n    // }\n\n    value: function handleInput(e) {\n      console.log(e.target.value);\n      this.setState({\n        userFilterInput: e.target.value\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          user = _props.user,\n          email = _props.email;\n\n      if (!user) return _react2.default.createElement(\n        _reactRouterDom.Link,\n        { to: '/login' },\n        _react2.default.createElement(\n          'button',\n          null,\n          'Log In!'\n        )\n      );\n      return _react2.default.createElement(\n        'div',\n        { id: 'dashboard' },\n        _react2.default.createElement(\n          'div',\n          { className: 'nav' },\n          _react2.default.createElement(\n            'div',\n            null,\n            _react2.default.createElement(\n              'h1',\n              { className: 'title is-1' },\n              '\\uD83D\\uDD25 Welcome ',\n              user,\n              '!'\n            )\n          ),\n          _react2.default.createElement(\n            'div',\n            { id: 'dashboard-nav' },\n            _react2.default.createElement(\n              'button',\n              { className: 'button is-danger is-rounded is-large is-inverted is-outlined', onClick: function onClick() {\n                  return _this2.props.logout();\n                } },\n              'Log Out  \\xA0 ',\n              _react2.default.createElement('i', { className: 'fa-fw fas fa-sign-out-alt' })\n            ),\n            _react2.default.createElement(\n              _reactRouterDom.Link,\n              { to: '/create' },\n              _react2.default.createElement(\n                'button',\n                { className: 'button is-danger is-rounded is-large is-inverted is-outlined' },\n                'Create a poll!  \\xA0',\n                _react2.default.createElement('i', { className: 'fa-fw far fa-calendar-plus' })\n              )\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { id: 'polls-filter' },\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.setState({ filteredPolls: _this2.state.allPolls });\n              } },\n            'Show All Polls  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-sync-alt' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(false, false);\n              } },\n            'Show Only Undeployed \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-rocket' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(true, false);\n              } },\n            'Show Only Live  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-fire' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(false, true);\n              } },\n            'Show Only Completed  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-calendar-check' })\n          )\n        ),\n        _react2.default.createElement('input', { type: 'text', onChange: function onChange(e) {\n            return _this2.handleInput(e);\n          } }),\n        _react2.default.createElement(\n          'div',\n          { id: 'polls-container' },\n          this.state.filteredPolls.map(function (poll, i) {\n            if (poll.title.toLowerCase().indexOf(_this2.state.userFilterInput.toLowerCase()) !== -1) {\n              return _react2.default.createElement(_poll2.default, { key: i, index: i, poll: poll, close: _this2.close, deploy: _this2.deploy, deletePoll: _this2.deletePoll, openModal: _this2.openModal, setCurrentLink: _this2.setCurrentLink });\n            }\n          })\n        ),\n        _react2.default.createElement(\n          _reactModal2.default,\n          { isOpen: this.state.modalIsOpen, onAfterOpen: this.afterOpenModal, onRequestClose: this.closeModal, style: customStyles, contentLabel: 'Example Modal' },\n          _react2.default.createElement(\n            'button',\n            { onClick: this.closeModal },\n            'close'\n          ),\n          _react2.default.createElement(\n            'h2',\n            { ref: function ref(subtitle) {\n                return _this2.subtitle = subtitle;\n              } },\n            'Please input any numbers you\\'d like to text!'\n          ),\n          _react2.default.createElement(\n            'form',\n            { id: 'text-polls-form', onSubmit: function onSubmit(e) {\n                return e.preventDefault();\n              } },\n            _react2.default.createElement('textarea', { value: this.state.phoneNumbers, form: 'text-polls-form', cols: '50', rows: '5', placeholder: 'You may use comma-separated values (as in CSV sheet imports), starting with the area code.', onChange: function onChange(e) {\n                return _this2.setState({ phoneNumbers: e.target.value });\n              } }),\n            _react2.default.createElement(\n              'button',\n              { type: 'submit', onClick: this.sendTexts },\n              'Send Texts'\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return Dashboard;\n}(_react2.default.Component);\n\nexports.default = Dashboard;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvZGFzaGJvYXJkLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvZGFzaGJvYXJkLmpzeD8yYWZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSAncmVhY3QtbW9kYWwnO1xyXG5pbXBvcnQgeyBSZWRpcmVjdCwgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgUG9sbCBmcm9tICcuL3BvbGwnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBmaXJlcG9sbCwgcmVhbFRpbWVEQiB9IGZyb20gJy4uL2ZpcmVwb2xsTWFuYWdlbWVudENsaWVudCc7XHJcblxyXG5Nb2RhbC5zZXRBcHBFbGVtZW50KCcjYXBwJyk7XHJcblxyXG5jb25zdCBjdXN0b21TdHlsZXMgPSB7XHJcbiAgY29udGVudCA6IHtcclxuICAgIHRvcCAgICAgICAgICAgICAgICAgICA6ICc1MCUnLFxyXG4gICAgbGVmdCAgICAgICAgICAgICAgICAgIDogJzUwJScsXHJcbiAgICByaWdodCAgICAgICAgICAgICAgICAgOiAnYXV0bycsXHJcbiAgICBib3R0b20gICAgICAgICAgICAgICAgOiAnYXV0bycsXHJcbiAgICBtYXJnaW5SaWdodCAgICAgICAgICAgOiAnLTUwJScsXHJcbiAgICB0cmFuc2Zvcm0gICAgICAgICAgICAgOiAndHJhbnNsYXRlKC01MCUsIC01MCUpJ1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNvcnRCeURhdGVEZXNjZW5kaW5nID0gYXJyID0+IHtcclxuICByZXR1cm4gYXJyLnNvcnQoKGEsIGIpID0+IHtcclxuICAgIGlmIChhLnRpbWVNUyA8IGIudGltZU1TKSByZXR1cm4gMTtcclxuICAgIGVsc2UgcmV0dXJuIC0xO1xyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IGRlc3RydWN0dXJlUG9sbCA9IChwb2xsKSA9PiB7IFxyXG4gIHZhciByZXR1cm5PYmogPSB7fTtcclxuICByZXR1cm5PYmoucG9sbCA9IHtcclxuICAgIF9pZDogcG9sbC5faWQsXHJcbiAgICBkYXRhOiB7XHJcbiAgICBhdXRob3I6IHBvbGwuYXV0aG9yLFxyXG4gICAgbnVtX3F1ZXN0aW9uczogcG9sbC5xdWVzdGlvbnMubGVuZ3RoLFxyXG4gICAgc3RhcnRfdGltZTogXCJzb21lIERhdGVcIixcclxuICAgIHRpdGxlOiBwb2xsLnRpdGxlLFxyXG4gICAgd2lubmluZ19yZXNwb25zZTogbnVsbFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGxldCBxdWVzdGlvbnMgPSBwb2xsLnF1ZXN0aW9ucy5tYXAocXVlc3Rpb24gPT4ge1xyXG4gICAgbGV0IGFuc3dlcnMgPSBxdWVzdGlvbi5hbnN3ZXJzLm1hcCgoYW5zd2VyLCBpKSA9PiB7XHJcbiAgICAgIGxldCBhbnN3ZXJPYmogPSB7XHJcbiAgICAgICAgaWQ6IGFuc3dlci5faWQsXHJcbiAgICAgICAgcG9zaXRpb246IGkgKyAxLFxyXG4gICAgICAgIHZhbHVlOiBhbnN3ZXIuY2hvaWNlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFuc3dlck9iajtcclxuICAgIH0pXHJcbiAgICBsZXQgb2JqID0ge1xyXG4gICAgICBhbnN3ZXJzOiBhbnN3ZXJzLFxyXG4gICAgICBkaXNwbGF5X3Jlc3VsdHM6IHRydWUsXHJcbiAgICAgIG51bV9yZXNwb25zZXM6IHF1ZXN0aW9uLmFuc3dlcnMubGVuZ3RoLFxyXG4gICAgICBxdWVzdGlvbl90aXRsZTogcXVlc3Rpb24ucXVlc3Rpb24sXHJcbiAgICAgIHRvdGFsX3ZvdGluZ190aW1lOiAxMDAwMCxcclxuICAgICAgdHlwZTogXCJtdWx0aXBsZS1jaG9pY2VcIlxyXG4gICAgfVxyXG4gICAgbGV0IHF1ZXN0aW9uV3JhcHBlciA9IHtcclxuICAgICAgaWQ6IHF1ZXN0aW9uLl9pZCxcclxuICAgICAgZGF0YTogb2JqXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlc3Rpb25XcmFwcGVyO1xyXG4gIH0pXHJcbiAgcmV0dXJuT2JqLnF1ZXN0aW9ucyA9IHF1ZXN0aW9ucztcclxuICByZXR1cm4gcmV0dXJuT2JqO1xyXG59XHJcblxyXG5jbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBhbGxQb2xsczogW10sXHJcbiAgICAgIGZpbHRlcmVkUG9sbHM6IFtdLFxyXG4gICAgICB1c2VyRmlsdGVySW5wdXQ6ICcnLFxyXG4gICAgICBtb2RhbElzT3BlbjogZmFsc2UsXHJcbiAgICAgIHBob25lTnVtYmVyczogJycsXHJcbiAgICAgIGN1cnJlbnRMaW5rOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogdHJ1ZX0pO1xyXG4gIH1cclxuICBhZnRlck9wZW5Nb2RhbCA9ICgpID0+IHtcclxuICAgIC8vIHJlZmVyZW5jZXMgYXJlIG5vdyBzeW5jJ2QgYW5kIGNhbiBiZSBhY2Nlc3NlZC5cclxuICAgIC8vIHRoaXMuc3VidGl0bGUuc3R5bGUuY29sb3IgPSAnI2YwMCc7XHJcbiAgfVxyXG4gIGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIHNlbmRUZXh0cyA9ICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCd0ZXh0aW5nIG91dCBsaW5rcyEnLCB0aGlzLnN0YXRlLnBob25lTnVtYmVycywgdGhpcy5zdGF0ZS5jdXJyZW50TGluayk7XHJcbiAgICBsZXQgcGhvbmVOdW1iZXIgPSB0aGlzLnN0YXRlLnBob25lTnVtYmVycywgbGluayA9IHRoaXMuc3RhdGUuY3VycmVudExpbms7XHJcbiAgICBpZiAocGhvbmVOdW1iZXIubGVuZ3RoID49IDEwKSB7XHJcbiAgICAgIGF4aW9zLnBvc3QoJy9ub3RpZmljYXRpb25zJywge2xpbmssIHBob25lTnVtYmVyfSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cGhvbmVOdW1iZXJzOiAnJ30pO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0Q3VycmVudExpbmsgPSBjdXJyZW50TGluayA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlua30pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9sbHMgPSAoKSA9PiB7XHJcbiAgICBheGlvcy5nZXQoYC9wb2xscy91c2VyLyR7dGhpcy5wcm9wcy51c2VySWR9YClcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCd1c2VycyBwb2xsczogJywgcmVzLmRhdGEpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHthbGxQb2xsczogcmVzLmRhdGEsIGZpbHRlcmVkUG9sbHM6IHJlcy5kYXRhfSlcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgLy8gV2hlbiBjb21wb25lbnREaWRNb3VudCBydW5zIHRoZSBmaXJzdCB0aW1lLCB0aGUgcHJvcHMgYXJlIG5vdCBzZXQgeWV0LCBzbyB0aGF0IG91ciBkYiBjYWxsIHdvdWxkIGZhaWxcclxuICAvLyBUaGUgaW50ZXJ2YWwgaXMgYSBWRVJZIGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBwcm9ibGVtXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzKTtcclxuICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ3J1bm5pbmcgaW50ZXJ2YWwnKTtcclxuICAgICAgaWYodGhhdC5wcm9wcy51c2VySWQgIT09IG51bGwpIHtcclxuICAgICAgICB0aGF0LmdldFBvbGxzKCk7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgIH1cclxuICAgIH0sIDIwMCk7XHJcbiAgfVxyXG5cclxuICAvLyBPTkUgV0FZIFRPIFNPTFZFIElULCBLSU5EQSBSSVNLWVxyXG4gIC8qc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XHJcbiAgICBpZihuZXh0UHJvcHMgPT09IHRoaXMucHJvcHMgJiYgdGhpcy5zdGF0ZS5hbGxQb2xscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmKG5leHRTdGF0ZS5maWx0ZXJlZFBvbGxzICE9PSBuZXh0U3RhdGUuYWxsUG9sbHMpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgIHRoaXMuZ2V0UG9sbHMoKTtcclxuICB9Ki9cclxuICBcclxuICAvLyBUSElTIFNIT1VMRCBSVU4sIEJVVCBJVCBORVZFUiBHRVRTIFJVTlxyXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xyXG4gICAgY29uc29sZS5sb2coJ3dpbGwgcmVjZWl2ZSBwcm9wcycsIHRoaXMucHJvcHMpO1xyXG4gICAgLy90aGlzLmdldFBvbGxzKHRoaXMucHJvcHMudXNlcklkKTtcclxuICB9XHJcbiAgXHJcbiAgY2xvc2UgPSAoaW5kZXgpID0+IHtcclxuICAgIGxldCBwb2xsID0gdGhpcy5zdGF0ZS5maWx0ZXJlZFBvbGxzW2luZGV4XTtcclxuICAgIGF4aW9zLnB1dChgL3BvbGxzL2Nsb3NlLyR7cG9sbC5faWR9YCwgcG9sbClcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGZpcmVwb2xsLmNsb3NlKHBvbGwpO1xyXG4gICAgICByZWFsVGltZURCLnJlZihgL3BvbGxzLyR7cG9sbC5faWR9YCkucmVtb3ZlKClcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignZGVsZXRpbmcgcG9sbCBmcm9tIHJlYWxUaW1lREInLCBlcnIpXHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VkIHBvbGwgXCIsIHBvbGwudGl0bGUpO1xyXG4gICAgICB0aGlzLmdldFBvbGxzKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTYXZlZDogJywgcmVzLmRhdGEpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdDbG9zaW5nIFBvbGw6ICcsIGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVwbG95ID0gKGluZGV4KSA9PiB7XHJcbiAgICAvLyBmb3JtYXRzIHRoZSBwb2xsXHJcbiAgICB2YXIgZGVzdHJ1Y3R1cmVkID0gZGVzdHJ1Y3R1cmVQb2xsKHRoaXMuc3RhdGUuZmlsdGVyZWRQb2xsc1tpbmRleF0pO1xyXG4gICAgY29uc29sZS5sb2coJ2Rlc3RydWN0dXJlZDogJywgZGVzdHJ1Y3R1cmVkKTtcclxuICAgIC8vIHNob3VsZCBzZW5kIHBvbGwgdG8gZmlyZXN0b3JlXHJcbiAgICBmaXJlcG9sbC5ydW4oZGVzdHJ1Y3R1cmVkKTtcclxuICAgIC8vIHNlbmQgZGIgcmVxdWVzdCB0byB1cGRhdGUgcG9sbCB0byBgYWN0aXZlYCA9IHRydWUsXHJcbiAgICBheGlvcy5wdXQoYC9wb2xscy8ke2Rlc3RydWN0dXJlZC5wb2xsLl9pZH1gLCB7YWN0aXZlOiB0cnVlfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWQgJywgZGVzdHJ1Y3R1cmVkLnBvbGwuZGF0YS50aXRsZSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VwZGF0aW5nIHBvbGwgaW4gTW9uZ29EQiB0byBhY3RpdmU6dHJ1ZSA6JywgZXJyKVxyXG4gICAgfSk7XHJcbiAgICAvLyBzaG91bGQgdHJpZ2dlciBhIHJlcmVuZGVyIG9mIHRoZSBwb2xsc1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlLCBwcm9wcykgPT4ge1xyXG4gICAgICBwcmV2U3RhdGUuZmlsdGVyZWRQb2xsc1tpbmRleF0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBmaWx0ZXJQb2xscyA9IChhY3RpdmUsIGNvbXBsZXRlZCkgPT4ge1xyXG4gICAgbGV0IGZpbHRlcmVkID0gdGhpcy5zdGF0ZS5hbGxQb2xscy5maWx0ZXIocG9sbCA9PiBwb2xsLmNvbXBsZXRlZCA9PT0gY29tcGxldGVkICYmIHBvbGwuYWN0aXZlID09PSBhY3RpdmUpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZmlsdGVyZWRQb2xsczogZmlsdGVyZWR9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZVBvbGwgPSBpZCA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnZGVsZXRpbmcgcG9sbCB0aGF0IHdhcyBjcmVhdGVkIGJ1dCBub3QgZGVwbG95ZWQhIGlkOicsIGlkKTtcclxuICAgIC8vIHJlbW92ZSBmcm9tIG1vbmdvIGRiXHJcbiAgICBheGlvcy5kZWxldGUoYC9wb2xscy8ke2lkfWApXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICB0aGlzLmdldFBvbGxzKCk7XHJcbiAgICAgIGZpcmVwb2xsLnVuc3RhZ2UocG9sbElkKVxyXG4gICAgICAgIC50aGVuKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIHVuc3RhZ2VQb2xsID0gaWQgPT4ge1xyXG4gIC8vICAgZmlyZXBvbGwudW5zdGFnZShwb2xsSWQpXHJcbiAgLy8gICAudGhlbihkYXRhID0+IGNvbnNvbGUubG9nKGRhdGEpKVxyXG4gIC8vICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAvLyB9XHJcblxyXG4gIGhhbmRsZUlucHV0KGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LnZhbHVlKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB1c2VyRmlsdGVySW5wdXQ6IGUudGFyZ2V0LnZhbHVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgbGV0IHsgdXNlciwgZW1haWwgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiA8TGluayB0bz1cIi9sb2dpblwiPjxidXR0b24+TG9nIEluITwvYnV0dG9uPjwvTGluaz47XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBpZD1cImRhc2hib2FyZFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXZcIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGl0bGUgaXMtMVwiPvCflKUgV2VsY29tZSB7dXNlcn0hPC9oMT5cclxuICAgICAgICAgICAgICB7LyogPGgxIGNsYXNzTmFtZT1cInN1YnRpdGxlIGlzLTRcIj5Zb3UgYXJlIHNpZ25pbmcgaW4gd2l0aCB7ZW1haWx9PC9oMT4gKi99XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwiZGFzaGJvYXJkLW5hdlwiPlxyXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLWxhcmdlIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5sb2dvdXQoKX0+TG9nIE91dCBcdCZuYnNwOyA8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtc2lnbi1vdXQtYWx0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDxMaW5rIHRvPVwiL2NyZWF0ZVwiPjxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLWxhcmdlIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCI+Q3JlYXRlIGEgcG9sbCEgXHQmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXIgZmEtY2FsZW5kYXItcGx1c1wiPjwvaT48L2J1dHRvbj48L0xpbms+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGlkPVwicG9sbHMtZmlsdGVyXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLW1lZGl1bSBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoe2ZpbHRlcmVkUG9sbHM6IHRoaXMuc3RhdGUuYWxsUG9sbHN9KX0+U2hvdyBBbGwgUG9sbHMgXHQmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtc3luYy1hbHRcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLW1lZGl1bSBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiIG9uQ2xpY2s9eygpID0+IHRoaXMuZmlsdGVyUG9sbHMoZmFsc2UsIGZhbHNlKX0+U2hvdyBPbmx5IFVuZGVwbG95ZWQgJm5ic3A7PGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLXJvY2tldFwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbWVkaXVtIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gdGhpcy5maWx0ZXJQb2xscyh0cnVlLCBmYWxzZSl9PlNob3cgT25seSBMaXZlIFx0Jm5ic3A7PGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLWZpcmVcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLW1lZGl1bSBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiIG9uQ2xpY2s9eygpID0+IHRoaXMuZmlsdGVyUG9sbHMoZmFsc2UsIHRydWUpfT5TaG93IE9ubHkgQ29tcGxldGVkIFx0Jm5ic3A7PGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLWNhbGVuZGFyLWNoZWNrXCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBvbkNoYW5nZSA9IHtlID0+IHRoaXMuaGFuZGxlSW5wdXQoZSl9PjwvaW5wdXQ+XHJcbiAgICAgICAgICA8ZGl2IGlkPVwicG9sbHMtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmZpbHRlcmVkUG9sbHMubWFwKChwb2xsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHBvbGwudGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRoaXMuc3RhdGUudXNlckZpbHRlcklucHV0LnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8UG9sbCBrZXk9e2l9IGluZGV4PXtpfSBwb2xsPXtwb2xsfSBjbG9zZT17dGhpcy5jbG9zZX0gZGVwbG95PXt0aGlzLmRlcGxveX0gZGVsZXRlUG9sbD17dGhpcy5kZWxldGVQb2xsfSBvcGVuTW9kYWw9e3RoaXMub3Blbk1vZGFsfSBzZXRDdXJyZW50TGluaz17dGhpcy5zZXRDdXJyZW50TGlua30vPik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxNb2RhbCBpc09wZW49e3RoaXMuc3RhdGUubW9kYWxJc09wZW59IG9uQWZ0ZXJPcGVuPXt0aGlzLmFmdGVyT3Blbk1vZGFsfSBvblJlcXVlc3RDbG9zZT17dGhpcy5jbG9zZU1vZGFsfSBzdHlsZT17Y3VzdG9tU3R5bGVzfSBjb250ZW50TGFiZWw9XCJFeGFtcGxlIE1vZGFsXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuY2xvc2VNb2RhbH0+Y2xvc2U8L2J1dHRvbj5cclxuICAgICAgICAgIDxoMiByZWY9e3N1YnRpdGxlID0+IHRoaXMuc3VidGl0bGUgPSBzdWJ0aXRsZX0+UGxlYXNlIGlucHV0IGFueSBudW1iZXJzIHlvdSdkIGxpa2UgdG8gdGV4dCE8L2gyPlxyXG4gICAgICAgICAgPGZvcm0gaWQ9XCJ0ZXh0LXBvbGxzLWZvcm1cIiBvblN1Ym1pdD17ZSA9PiBlLnByZXZlbnREZWZhdWx0KCl9PlxyXG4gICAgICAgICAgICA8dGV4dGFyZWEgdmFsdWU9e3RoaXMuc3RhdGUucGhvbmVOdW1iZXJzfSBmb3JtPVwidGV4dC1wb2xscy1mb3JtXCIgY29scz1cIjUwXCIgcm93cz1cIjVcIiBwbGFjZWhvbGRlcj1cIllvdSBtYXkgdXNlIGNvbW1hLXNlcGFyYXRlZCB2YWx1ZXMgKGFzIGluIENTViBzaGVldCBpbXBvcnRzKSwgc3RhcnRpbmcgd2l0aCB0aGUgYXJlYSBjb2RlLlwiIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoe3Bob25lTnVtYmVyczogZS50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgb25DbGljaz17dGhpcy5zZW5kVGV4dHN9PlNlbmQgVGV4dHM8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L01vZGFsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXNoYm9hcmQ7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFGQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWFBO0FBQ0E7QUFDQTtBQWZBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBb0JBO0FBQ0E7QUFDQTtBQXRCQTtBQXdCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQXFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUF5Q0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWxEQTtBQXVGQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBdkdBO0FBeUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVIQTtBQThIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFqSUE7QUFtSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBRkE7QUFVQTtBQUNBOzs7OztBQXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQTZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBTEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSEE7QUF6QkE7QUFtQ0E7Ozs7QUF0TUE7QUFDQTtBQXdNQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/managementClient/dashboard.jsx\n");

/***/ }),

/***/ "./client/src/managementClient/poll.jsx":
/*!**********************************************!*\
  !*** ./client/src/managementClient/poll.jsx ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/es/index.js\");\n\nvar _copyToClipboard = __webpack_require__(/*! copy-to-clipboard */ \"./node_modules/copy-to-clipboard/index.js\");\n\nvar _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);\n\nvar _axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// () => {textLink(linkUrl, prompt('Enter a number to text your link to!'))}\nvar textLink = function textLink(link, phoneNumber) {\n  console.log('texting link to', phoneNumber);\n  // let password = 'rose123';  // implement paywalling later on based on userId\n};\n\nvar Poll = function Poll(props) {\n  var poll = props.poll,\n      deletePoll = props.deletePoll,\n      editPoll = props.editPoll,\n      openModal = props.openModal,\n      setCurrentLink = props.setCurrentLink;\n\n  var deployButton = _react2.default.createElement(\n    'button',\n    { className: 'button is-danger is-rounded is-small is-inverted is-outlined', onClick: function onClick() {\n        return props.deploy(props.index);\n      } },\n    'DEPLOY ',\n    _react2.default.createElement('i', { className: 'fa-fw fas fa-rocket' })\n  );\n  var liveButton = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/live/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'VIEW LIVE ',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-fire' })\n    )\n  );\n  var analyticsButton = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/analytics/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'VIEW ANALYTICS ',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-calendar-check' })\n    )\n  );\n  var closeButton = _react2.default.createElement(\n    'button',\n    { onClick: function onClick() {\n        return props.close(props.index);\n      }, className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n    'CLOSE POLL'\n  );\n  // let status = !poll.active ? 'DEPLOY' : poll.completed ? 'VIEW ANALYTICS' : 'VIEW LIVE';\n  // let statusButton = !poll.active ? deployButton : poll.completed ? analyticsButton : liveButton;\n  var status = poll.completed ? 'VIEW ANALYTICS' : poll.active ? 'VIEW LIVE' : 'DEPLOY';\n  var statusButton = poll.completed ? analyticsButton : poll.active ? liveButton : deployButton;\n  var deletePollButton = _react2.default.createElement(\n    'button',\n    { className: 'button is-danger is-rounded is-small is-inverted is-outlined', onClick: function onClick() {\n        return deletePoll(poll._id);\n      } },\n    'DELETE\\xA0',\n    _react2.default.createElement('i', { className: 'fa-fw fas fa-trash' })\n  );\n  var UndeployedEdit = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/edit/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'EDIT\\xA0',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-edit' })\n    )\n  );\n  // let completedDelete = <button onClick={() => deletePoll(poll._id)}>DELETE POLL</button>;\n  // let deleteButton = poll.completed ? completedDelete : poll.active ? '' : undeployedDelete;\n  var linkUrl = 'https://firepoll.herokuapp.com/response/' + poll._id;\n  return _react2.default.createElement(\n    'div',\n    { className: 'poll-item' },\n    _react2.default.createElement(\n      'div',\n      { className: 'dashboard-options' },\n      _react2.default.createElement(\n        'div',\n        { className: 'response-url' },\n        _react2.default.createElement(\n          'button',\n          { className: 'button is-danger is-rounded is-inverted is-outlined', onClick: function onClick() {\n              return (0, _copyToClipboard2.default)(linkUrl);\n            } },\n          'Copy Link to Vote\\xA0',\n          _react2.default.createElement('i', { className: 'far fa-clipboard' })\n        ),\n        _react2.default.createElement(\n          'button',\n          { className: 'button is-danger is-rounded is-inverted is-outlined' },\n          _react2.default.createElement(\n            'a',\n            { href: 'mailto:?subject=Vote in this Fire Poll!&body=Here is a link to your fire poll!%0D%0A\\n            ' + linkUrl + '%0D%0A\\n            Thanks for voting!' },\n            'Email Link\\xA0',\n            _react2.default.createElement('i', { className: 'far fa-envelope' })\n          )\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: function onClick() {\n              openModal();setCurrentLink(linkUrl);\n            }, className: 'button is-danger is-rounded is-inverted is-outlined' },\n          'Text Link'\n        )\n      ),\n      _react2.default.createElement(\n        'div',\n        { className: 'dashboard-options-group' },\n        statusButton,\n        poll.active && closeButton,\n        status === 'DEPLOY' && deletePollButton,\n        status === 'DEPLOY' && UndeployedEdit,\n        status === 'VIEW ANALYTICS' && deletePollButton\n      )\n    ),\n    '\\u200B',\n    _react2.default.createElement('hr', null),\n    _react2.default.createElement(\n      'h1',\n      { className: 'title is-3' },\n      poll.title\n    ),\n    _react2.default.createElement(\n      'div',\n      { className: 'questions-box' },\n      poll.questions.map(function (question) {\n        return _react2.default.createElement(\n          'p',\n          { key: question._id },\n          question.question\n        );\n      })\n    )\n  );\n};\n\nexports.default = Poll;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvcG9sbC5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L3NyYy9tYW5hZ2VtZW50Q2xpZW50L3BvbGwuanN4PzRiN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgY29weSBmcm9tICdjb3B5LXRvLWNsaXBib2FyZCc7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbi8vICgpID0+IHt0ZXh0TGluayhsaW5rVXJsLCBwcm9tcHQoJ0VudGVyIGEgbnVtYmVyIHRvIHRleHQgeW91ciBsaW5rIHRvIScpKX1cclxuY29uc3QgdGV4dExpbmsgPSAobGluaywgcGhvbmVOdW1iZXIpID0+IHtcclxuICBjb25zb2xlLmxvZygndGV4dGluZyBsaW5rIHRvJywgcGhvbmVOdW1iZXIpO1xyXG4gIC8vIGxldCBwYXNzd29yZCA9ICdyb3NlMTIzJzsgIC8vIGltcGxlbWVudCBwYXl3YWxsaW5nIGxhdGVyIG9uIGJhc2VkIG9uIHVzZXJJZFxyXG5cclxufVxyXG5cclxuY29uc3QgUG9sbCA9IChwcm9wcykgPT4ge1xyXG4gIGxldCB7cG9sbCwgZGVsZXRlUG9sbCwgZWRpdFBvbGwsIG9wZW5Nb2RhbCwgc2V0Q3VycmVudExpbmt9ID0gcHJvcHM7XHJcbiAgbGV0IGRlcGxveUJ1dHRvbiA9ICg8YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1zbWFsbCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiIG9uQ2xpY2s9eygpID0+IHByb3BzLmRlcGxveShwcm9wcy5pbmRleCl9PkRFUExPWSA8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtcm9ja2V0XCI+PC9pPjwvYnV0dG9uPik7XHJcbiAgbGV0IGxpdmVCdXR0b24gPSAoPExpbmsgdG89e2AvbGl2ZS8ke3BvbGwuX2lkfWB9PjxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLXNtYWxsIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCI+VklFVyBMSVZFIDxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS1maXJlXCI+PC9pPjwvYnV0dG9uPjwvTGluaz4pO1xyXG4gIGxldCBhbmFseXRpY3NCdXR0b24gPSAoPExpbmsgdG89e2AvYW5hbHl0aWNzLyR7cG9sbC5faWR9YH0+PGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtc21hbGwgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIj5WSUVXIEFOQUxZVElDUyA8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtY2FsZW5kYXItY2hlY2tcIj48L2k+PC9idXR0b24+PC9MaW5rPik7XHJcbiAgbGV0IGNsb3NlQnV0dG9uID0gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBwcm9wcy5jbG9zZShwcm9wcy5pbmRleCl9IGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1zbWFsbCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiPkNMT1NFIFBPTEw8L2J1dHRvbj5cclxuICAvLyBsZXQgc3RhdHVzID0gIXBvbGwuYWN0aXZlID8gJ0RFUExPWScgOiBwb2xsLmNvbXBsZXRlZCA/ICdWSUVXIEFOQUxZVElDUycgOiAnVklFVyBMSVZFJztcclxuICAvLyBsZXQgc3RhdHVzQnV0dG9uID0gIXBvbGwuYWN0aXZlID8gZGVwbG95QnV0dG9uIDogcG9sbC5jb21wbGV0ZWQgPyBhbmFseXRpY3NCdXR0b24gOiBsaXZlQnV0dG9uO1xyXG4gIGxldCBzdGF0dXMgPSBwb2xsLmNvbXBsZXRlZCA/ICdWSUVXIEFOQUxZVElDUycgOiBwb2xsLmFjdGl2ZSA/ICdWSUVXIExJVkUnIDogJ0RFUExPWSc7XHJcbiAgbGV0IHN0YXR1c0J1dHRvbiA9IHBvbGwuY29tcGxldGVkID8gYW5hbHl0aWNzQnV0dG9uIDogcG9sbC5hY3RpdmUgPyBsaXZlQnV0dG9uIDogZGVwbG95QnV0dG9uO1xyXG4gIGxldCBkZWxldGVQb2xsQnV0dG9uID0gKDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLXNtYWxsIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gZGVsZXRlUG9sbChwb2xsLl9pZCl9PkRFTEVURSZuYnNwOzxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS10cmFzaFwiPjwvaT48L2J1dHRvbj4pO1xyXG4gIGxldCBVbmRlcGxveWVkRWRpdCA9ICg8TGluayB0bz17YC9lZGl0LyR7cG9sbC5faWR9YH0+XHJcbiAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtc21hbGwgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIj5FRElUJm5ic3A7PGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLWVkaXRcIj48L2k+PC9idXR0b24+XHJcbiAgPC9MaW5rPik7XHJcbiAgLy8gbGV0IGNvbXBsZXRlZERlbGV0ZSA9IDxidXR0b24gb25DbGljaz17KCkgPT4gZGVsZXRlUG9sbChwb2xsLl9pZCl9PkRFTEVURSBQT0xMPC9idXR0b24+O1xyXG4gIC8vIGxldCBkZWxldGVCdXR0b24gPSBwb2xsLmNvbXBsZXRlZCA/IGNvbXBsZXRlZERlbGV0ZSA6IHBvbGwuYWN0aXZlID8gJycgOiB1bmRlcGxveWVkRGVsZXRlO1xyXG4gIGxldCBsaW5rVXJsID0gYGh0dHBzOi8vZmlyZXBvbGwuaGVyb2t1YXBwLmNvbS9yZXNwb25zZS8ke3BvbGwuX2lkfWA7XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicG9sbC1pdGVtXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGFzaGJvYXJkLW9wdGlvbnNcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3BvbnNlLXVybFwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIiBvbkNsaWNrPXsoKSA9PiBjb3B5KGxpbmtVcmwpfT5Db3B5IExpbmsgdG8gVm90ZSZuYnNwOzxpIGNsYXNzTmFtZT1cImZhciBmYS1jbGlwYm9hcmRcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiPlxyXG4gICAgICAgICAgICA8YSBocmVmPXtgbWFpbHRvOj9zdWJqZWN0PVZvdGUgaW4gdGhpcyBGaXJlIFBvbGwhJmJvZHk9SGVyZSBpcyBhIGxpbmsgdG8geW91ciBmaXJlIHBvbGwhJTBEJTBBXHJcbiAgICAgICAgICAgICR7bGlua1VybH0lMEQlMEFcclxuICAgICAgICAgICAgVGhhbmtzIGZvciB2b3RpbmchYH0gPkVtYWlsIExpbmsmbmJzcDs8aSBjbGFzc05hbWU9XCJmYXIgZmEtZW52ZWxvcGVcIj48L2k+PC9hPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHtvcGVuTW9kYWwoKTsgc2V0Q3VycmVudExpbmsobGlua1VybCk7fX0gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCI+VGV4dCBMaW5rPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXNoYm9hcmQtb3B0aW9ucy1ncm91cFwiPlxyXG4gICAgICAgICAge3N0YXR1c0J1dHRvbn1cclxuICAgICAgICAgIHtwb2xsLmFjdGl2ZSAmJiBjbG9zZUJ1dHRvbn1cclxuICAgICAgICAgIHtzdGF0dXMgPT09ICdERVBMT1knICYmIGRlbGV0ZVBvbGxCdXR0b259XHJcbiAgICAgICAgICB7c3RhdHVzID09PSAnREVQTE9ZJyAmJiBVbmRlcGxveWVkRWRpdH1cclxuICAgICAgICAgIHtzdGF0dXMgPT09ICdWSUVXIEFOQUxZVElDUycgJiYgZGVsZXRlUG9sbEJ1dHRvbn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgICYjODIwMztcclxuICAgICAgPGhyIC8+XHJcblxyXG4gICAgICA8aDEgY2xhc3NOYW1lPVwidGl0bGUgaXMtM1wiPntwb2xsLnRpdGxlfTwvaDE+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicXVlc3Rpb25zLWJveFwiPlxyXG4gICAgICAgIHtwb2xsLnF1ZXN0aW9ucy5tYXAocXVlc3Rpb24gPT4gPHAga2V5PXtxdWVzdGlvbi5faWR9PntxdWVzdGlvbi5xdWVzdGlvbn08L3A+KX1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59IFxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9sbDsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVZBO0FBREE7QUFvQkE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQXZCQTtBQTZCQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/managementClient/poll.jsx\n");

/***/ })

}]);