(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[5],{

/***/ "./client/src/managementClient/dashboard.jsx":
/*!***************************************************!*\
  !*** ./client/src/managementClient/dashboard.jsx ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactModal = __webpack_require__(/*! react-modal */ \"./node_modules/react-modal/lib/index.js\");\n\nvar _reactModal2 = _interopRequireDefault(_reactModal);\n\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/es/index.js\");\n\nvar _poll = __webpack_require__(/*! ./poll */ \"./client/src/managementClient/poll.jsx\");\n\nvar _poll2 = _interopRequireDefault(_poll);\n\nvar _axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _firepollManagementClient = __webpack_require__(/*! ../firepollManagementClient */ \"./client/src/firepollManagementClient.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n_reactModal2.default.setAppElement('#app');\n\nvar customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\n\nvar sortByDateDescending = function sortByDateDescending(arr) {\n  return arr.sort(function (a, b) {\n    if (a.timeMS < b.timeMS) return 1;else return -1;\n  });\n};\n\nvar destructurePoll = function destructurePoll(poll) {\n  var returnObj = {};\n  returnObj.poll = {\n    _id: poll._id,\n    data: {\n      author: poll.author,\n      num_questions: poll.questions.length,\n      start_time: \"some Date\",\n      title: poll.title,\n      winning_response: null\n    }\n  };\n\n  var questions = poll.questions.map(function (question) {\n    var answers = question.answers.map(function (answer, i) {\n      var answerObj = {\n        id: answer._id,\n        position: i + 1,\n        value: answer.choice\n      };\n      return answerObj;\n    });\n    var obj = {\n      answers: answers,\n      display_results: true,\n      num_responses: question.answers.length,\n      question_title: question.question,\n      total_voting_time: 10000,\n      type: \"multiple-choice\"\n    };\n    var questionWrapper = {\n      id: question._id,\n      data: obj\n    };\n    return questionWrapper;\n  });\n  returnObj.questions = questions;\n  return returnObj;\n};\n\nvar Dashboard = function (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    _classCallCheck(this, Dashboard);\n\n    var _this = _possibleConstructorReturn(this, (Dashboard.__proto__ || Object.getPrototypeOf(Dashboard)).call(this, props));\n\n    _this.openModal = function () {\n      _this.setState({ modalIsOpen: true });\n    };\n\n    _this.afterOpenModal = function () {\n      // references are now sync'd and can be accessed.\n      // this.subtitle.style.color = '#f00';\n    };\n\n    _this.closeModal = function () {\n      _this.setState({ modalIsOpen: false });\n    };\n\n    _this.sendTexts = function () {\n      console.log('texting out links!', _this.state.phoneNumbers);\n\n      _this.setState({ phoneNumbers: '' });\n    };\n\n    _this.setCurrentLink = function (currentLink) {\n      _this.setState({ currentLink: currentLink });\n    };\n\n    _this.getPolls = function () {\n      _axios2.default.get('/polls/user/' + _this.props.userId).then(function (res) {\n        console.log('users polls: ', res.data);\n        _this.setState({ allPolls: res.data, filteredPolls: res.data });\n      }).catch(function (err) {\n        console.error(err);\n      });\n    };\n\n    _this.close = function (index) {\n      var poll = _this.state.filteredPolls[index];\n      _axios2.default.put('/polls/close/' + poll._id, poll).then(function (res) {\n        _firepollManagementClient.firepoll.close(poll);\n        _firepollManagementClient.realTimeDB.ref('/polls/' + poll._id).remove().catch(function (err) {\n          console.error('deleting poll from realTimeDB', err);\n        });\n        console.log(\"closed poll \", poll.title);\n        _this.getPolls();\n        console.log('Saved: ', res.data);\n      }).catch(function (err) {\n        console.error('Closing Poll: ', err);\n      });\n    };\n\n    _this.deploy = function (index) {\n      // formats the poll\n      var destructured = destructurePoll(_this.state.filteredPolls[index]);\n      console.log('destructured: ', destructured);\n      // should send poll to firestore\n      _firepollManagementClient.firepoll.run(destructured);\n      // send db request to update poll to `active` = true,\n      _axios2.default.put('/polls/' + destructured.poll._id, { active: true }).then(function () {\n        console.log('updated ', destructured.poll.data.title);\n      }).catch(function (err) {\n        console.error('Updating poll in MongoDB to active:true :', err);\n      });\n      // should trigger a rerender of the polls\n      _this.setState(function (prevState, props) {\n        prevState.filteredPolls[index].active = true;\n        return prevState;\n      });\n    };\n\n    _this.filterPolls = function (active, completed) {\n      var filtered = _this.state.allPolls.filter(function (poll) {\n        return poll.completed === completed && poll.active === active;\n      });\n      _this.setState({ filteredPolls: filtered });\n    };\n\n    _this.deletePoll = function (id) {\n      console.log('deleting poll that was created but not deployed! id:', id);\n      // remove from mongo db\n      _axios2.default.delete('/polls/' + id).then(function (res) {\n        _this.getPolls();\n        _firepollManagementClient.firepoll.unstage(pollId).then(function (data) {\n          return console.log(data);\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }).catch(function (err) {\n        console.error(err);\n      });\n    };\n\n    _this.state = {\n      allPolls: [],\n      filteredPolls: [],\n      userFilterInput: '',\n      modalIsOpen: false,\n      phoneNumbers: '',\n      currentLink: null\n    };\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: 'componentDidMount',\n\n\n    // When componentDidMount runs the first time, the props are not set yet, so that our db call would fail\n    // The interval is a VERY hacky solution to the problem\n    value: function componentDidMount() {\n      console.log(this.props);\n      var that = this;\n      var interval = setInterval(function () {\n        console.log('running interval');\n        if (that.props.userId !== null) {\n          that.getPolls();\n          clearInterval(interval);\n        }\n      }, 200);\n    }\n\n    // ONE WAY TO SOLVE IT, KINDA RISKY\n    /*shouldComponentUpdate(nextProps, nextState) {\r\n      if(nextProps === this.props && this.state.allPolls.length > 0) {\r\n        if(nextState.filteredPolls !== nextState.allPolls) {\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n      componentDidUpdate() {\r\n      this.getPolls();\r\n    }*/\n\n    // THIS SHOULD RUN, BUT IT NEVER GETS RUN\n\n  }, {\n    key: 'UNSAFE_componentWillReceiveProps',\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      console.log('will receive props', this.props);\n      //this.getPolls(this.props.userId);\n    }\n  }, {\n    key: 'handleInput',\n\n\n    // unstagePoll = id => {\n    //   firepoll.unstage(pollId)\n    //   .then(data => console.log(data))\n    //   .catch(err => console.log(err));\n    // }\n\n    value: function handleInput(e) {\n      console.log(e.target.value);\n      this.setState({\n        userFilterInput: e.target.value\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          user = _props.user,\n          email = _props.email;\n\n      if (!user) return _react2.default.createElement(\n        _reactRouterDom.Link,\n        { to: '/login' },\n        _react2.default.createElement(\n          'button',\n          null,\n          'Log In!'\n        )\n      );\n      return _react2.default.createElement(\n        'div',\n        { id: 'dashboard' },\n        _react2.default.createElement(\n          'div',\n          { className: 'nav' },\n          _react2.default.createElement(\n            'div',\n            null,\n            _react2.default.createElement(\n              'h1',\n              { className: 'title is-1' },\n              '\\uD83D\\uDD25 Welcome ',\n              user,\n              '!'\n            )\n          ),\n          _react2.default.createElement(\n            'div',\n            { id: 'dashboard-nav' },\n            _react2.default.createElement(\n              'button',\n              { className: 'button is-danger is-rounded is-large is-inverted is-outlined', onClick: function onClick() {\n                  return _this2.props.logout();\n                } },\n              'Log Out  \\xA0 ',\n              _react2.default.createElement('i', { className: 'fa-fw fas fa-sign-out-alt' })\n            ),\n            _react2.default.createElement(\n              _reactRouterDom.Link,\n              { to: '/create' },\n              _react2.default.createElement(\n                'button',\n                { className: 'button is-danger is-rounded is-large is-inverted is-outlined' },\n                'Create a poll!  \\xA0',\n                _react2.default.createElement('i', { className: 'fa-fw far fa-calendar-plus' })\n              )\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { id: 'polls-filter' },\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.setState({ filteredPolls: _this2.state.allPolls });\n              } },\n            'Show All Polls  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-sync-alt' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(false, false);\n              } },\n            'Show Only Undeployed \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-rocket' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(true, false);\n              } },\n            'Show Only Live  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-fire' })\n          ),\n          _react2.default.createElement(\n            'button',\n            { className: 'button is-danger is-rounded is-medium is-inverted is-outlined', onClick: function onClick() {\n                return _this2.filterPolls(false, true);\n              } },\n            'Show Only Completed  \\xA0',\n            _react2.default.createElement('i', { className: 'fa-fw fas fa-calendar-check' })\n          )\n        ),\n        _react2.default.createElement('input', { type: 'text', onChange: function onChange(e) {\n            return _this2.handleInput(e);\n          } }),\n        _react2.default.createElement(\n          'div',\n          { id: 'polls-container' },\n          this.state.filteredPolls.map(function (poll, i) {\n            if (poll.title.toLowerCase().indexOf(_this2.state.userFilterInput.toLowerCase()) !== -1) {\n              return _react2.default.createElement(_poll2.default, { key: i, index: i, poll: poll, close: _this2.close, deploy: _this2.deploy, deletePoll: _this2.deletePoll, openModal: _this2.openModal });\n            }\n          })\n        ),\n        _react2.default.createElement(\n          _reactModal2.default,\n          {\n            isOpen: this.state.modalIsOpen,\n            onAfterOpen: this.afterOpenModal,\n            onRequestClose: this.closeModal,\n            style: customStyles,\n            contentLabel: 'Example Modal'\n          },\n          _react2.default.createElement(\n            'button',\n            { onClick: this.closeModal },\n            'close'\n          ),\n          _react2.default.createElement(\n            'h2',\n            { ref: function ref(subtitle) {\n                return _this2.subtitle = subtitle;\n              } },\n            'Please input any numbers you\\'d like to text!'\n          ),\n          _react2.default.createElement(\n            'form',\n            { id: 'text-polls-form', onSubmit: function onSubmit(e) {\n                return e.preventDefault();\n              } },\n            _react2.default.createElement('textarea', { value: this.state.phoneNumbers, form: 'text-polls-form', cols: '50', rows: '5', placeholder: 'You may use comma-separated values (as in CSV sheet imports), starting with the area code.', onChange: function onChange(e) {\n                return _this2.setState({ phoneNumbers: e.target.value });\n              } }),\n            _react2.default.createElement(\n              'button',\n              { type: 'submit', onClick: this.sendTexts },\n              'Send Texts'\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return Dashboard;\n}(_react2.default.Component);\n\nexports.default = Dashboard;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvZGFzaGJvYXJkLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvZGFzaGJvYXJkLmpzeD8yYWZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSAncmVhY3QtbW9kYWwnO1xyXG5pbXBvcnQgeyBSZWRpcmVjdCwgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgUG9sbCBmcm9tICcuL3BvbGwnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBmaXJlcG9sbCwgcmVhbFRpbWVEQiB9IGZyb20gJy4uL2ZpcmVwb2xsTWFuYWdlbWVudENsaWVudCc7XHJcblxyXG5Nb2RhbC5zZXRBcHBFbGVtZW50KCcjYXBwJyk7XHJcblxyXG5jb25zdCBjdXN0b21TdHlsZXMgPSB7XHJcbiAgY29udGVudCA6IHtcclxuICAgIHRvcCAgICAgICAgICAgICAgICAgICA6ICc1MCUnLFxyXG4gICAgbGVmdCAgICAgICAgICAgICAgICAgIDogJzUwJScsXHJcbiAgICByaWdodCAgICAgICAgICAgICAgICAgOiAnYXV0bycsXHJcbiAgICBib3R0b20gICAgICAgICAgICAgICAgOiAnYXV0bycsXHJcbiAgICBtYXJnaW5SaWdodCAgICAgICAgICAgOiAnLTUwJScsXHJcbiAgICB0cmFuc2Zvcm0gICAgICAgICAgICAgOiAndHJhbnNsYXRlKC01MCUsIC01MCUpJ1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNvcnRCeURhdGVEZXNjZW5kaW5nID0gYXJyID0+IHtcclxuICByZXR1cm4gYXJyLnNvcnQoKGEsIGIpID0+IHtcclxuICAgIGlmIChhLnRpbWVNUyA8IGIudGltZU1TKSByZXR1cm4gMTtcclxuICAgIGVsc2UgcmV0dXJuIC0xO1xyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IGRlc3RydWN0dXJlUG9sbCA9IChwb2xsKSA9PiB7IFxyXG4gIHZhciByZXR1cm5PYmogPSB7fTtcclxuICByZXR1cm5PYmoucG9sbCA9IHtcclxuICAgIF9pZDogcG9sbC5faWQsXHJcbiAgICBkYXRhOiB7XHJcbiAgICBhdXRob3I6IHBvbGwuYXV0aG9yLFxyXG4gICAgbnVtX3F1ZXN0aW9uczogcG9sbC5xdWVzdGlvbnMubGVuZ3RoLFxyXG4gICAgc3RhcnRfdGltZTogXCJzb21lIERhdGVcIixcclxuICAgIHRpdGxlOiBwb2xsLnRpdGxlLFxyXG4gICAgd2lubmluZ19yZXNwb25zZTogbnVsbFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGxldCBxdWVzdGlvbnMgPSBwb2xsLnF1ZXN0aW9ucy5tYXAocXVlc3Rpb24gPT4ge1xyXG4gICAgbGV0IGFuc3dlcnMgPSBxdWVzdGlvbi5hbnN3ZXJzLm1hcCgoYW5zd2VyLCBpKSA9PiB7XHJcbiAgICAgIGxldCBhbnN3ZXJPYmogPSB7XHJcbiAgICAgICAgaWQ6IGFuc3dlci5faWQsXHJcbiAgICAgICAgcG9zaXRpb246IGkgKyAxLFxyXG4gICAgICAgIHZhbHVlOiBhbnN3ZXIuY2hvaWNlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFuc3dlck9iajtcclxuICAgIH0pXHJcbiAgICBsZXQgb2JqID0ge1xyXG4gICAgICBhbnN3ZXJzOiBhbnN3ZXJzLFxyXG4gICAgICBkaXNwbGF5X3Jlc3VsdHM6IHRydWUsXHJcbiAgICAgIG51bV9yZXNwb25zZXM6IHF1ZXN0aW9uLmFuc3dlcnMubGVuZ3RoLFxyXG4gICAgICBxdWVzdGlvbl90aXRsZTogcXVlc3Rpb24ucXVlc3Rpb24sXHJcbiAgICAgIHRvdGFsX3ZvdGluZ190aW1lOiAxMDAwMCxcclxuICAgICAgdHlwZTogXCJtdWx0aXBsZS1jaG9pY2VcIlxyXG4gICAgfVxyXG4gICAgbGV0IHF1ZXN0aW9uV3JhcHBlciA9IHtcclxuICAgICAgaWQ6IHF1ZXN0aW9uLl9pZCxcclxuICAgICAgZGF0YTogb2JqXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlc3Rpb25XcmFwcGVyO1xyXG4gIH0pXHJcbiAgcmV0dXJuT2JqLnF1ZXN0aW9ucyA9IHF1ZXN0aW9ucztcclxuICByZXR1cm4gcmV0dXJuT2JqO1xyXG59XHJcblxyXG5jbGFzcyBEYXNoYm9hcmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBhbGxQb2xsczogW10sXHJcbiAgICAgIGZpbHRlcmVkUG9sbHM6IFtdLFxyXG4gICAgICB1c2VyRmlsdGVySW5wdXQ6ICcnLFxyXG4gICAgICBtb2RhbElzT3BlbjogZmFsc2UsXHJcbiAgICAgIHBob25lTnVtYmVyczogJycsXHJcbiAgICAgIGN1cnJlbnRMaW5rOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogdHJ1ZX0pO1xyXG4gIH1cclxuICBhZnRlck9wZW5Nb2RhbCA9ICgpID0+IHtcclxuICAgIC8vIHJlZmVyZW5jZXMgYXJlIG5vdyBzeW5jJ2QgYW5kIGNhbiBiZSBhY2Nlc3NlZC5cclxuICAgIC8vIHRoaXMuc3VidGl0bGUuc3R5bGUuY29sb3IgPSAnI2YwMCc7XHJcbiAgfVxyXG4gIGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHttb2RhbElzT3BlbjogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIHNlbmRUZXh0cyA9ICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCd0ZXh0aW5nIG91dCBsaW5rcyEnLCB0aGlzLnN0YXRlLnBob25lTnVtYmVycylcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtwaG9uZU51bWJlcnM6ICcnfSk7XHJcbiAgfVxyXG5cclxuICBzZXRDdXJyZW50TGluayA9IGN1cnJlbnRMaW5rID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaW5rfSk7XHJcbiAgfVxyXG5cclxuICBnZXRQb2xscyA9ICgpID0+IHtcclxuICAgIGF4aW9zLmdldChgL3BvbGxzL3VzZXIvJHt0aGlzLnByb3BzLnVzZXJJZH1gKVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ3VzZXJzIHBvbGxzOiAnLCByZXMuZGF0YSk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2FsbFBvbGxzOiByZXMuZGF0YSwgZmlsdGVyZWRQb2xsczogcmVzLmRhdGF9KVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICAvLyBXaGVuIGNvbXBvbmVudERpZE1vdW50IHJ1bnMgdGhlIGZpcnN0IHRpbWUsIHRoZSBwcm9wcyBhcmUgbm90IHNldCB5ZXQsIHNvIHRoYXQgb3VyIGRiIGNhbGwgd291bGQgZmFpbFxyXG4gIC8vIFRoZSBpbnRlcnZhbCBpcyBhIFZFUlkgaGFja3kgc29sdXRpb24gdG8gdGhlIHByb2JsZW1cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpO1xyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygncnVubmluZyBpbnRlcnZhbCcpO1xyXG4gICAgICBpZih0aGF0LnByb3BzLnVzZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRoYXQuZ2V0UG9sbHMoKTtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgfVxyXG4gICAgfSwgMjAwKTtcclxuICB9XHJcblxyXG4gIC8vIE9ORSBXQVkgVE8gU09MVkUgSVQsIEtJTkRBIFJJU0tZXHJcbiAgLypzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcclxuICAgIGlmKG5leHRQcm9wcyA9PT0gdGhpcy5wcm9wcyAmJiB0aGlzLnN0YXRlLmFsbFBvbGxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgaWYobmV4dFN0YXRlLmZpbHRlcmVkUG9sbHMgIT09IG5leHRTdGF0ZS5hbGxQb2xscykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgdGhpcy5nZXRQb2xscygpO1xyXG4gIH0qL1xyXG4gIFxyXG4gIC8vIFRISVMgU0hPVUxEIFJVTiwgQlVUIElUIE5FVkVSIEdFVFMgUlVOXHJcbiAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XHJcbiAgICBjb25zb2xlLmxvZygnd2lsbCByZWNlaXZlIHByb3BzJywgdGhpcy5wcm9wcyk7XHJcbiAgICAvL3RoaXMuZ2V0UG9sbHModGhpcy5wcm9wcy51c2VySWQpO1xyXG4gIH1cclxuICBcclxuICBjbG9zZSA9IChpbmRleCkgPT4ge1xyXG4gICAgbGV0IHBvbGwgPSB0aGlzLnN0YXRlLmZpbHRlcmVkUG9sbHNbaW5kZXhdO1xyXG4gICAgYXhpb3MucHV0KGAvcG9sbHMvY2xvc2UvJHtwb2xsLl9pZH1gLCBwb2xsKVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgZmlyZXBvbGwuY2xvc2UocG9sbCk7XHJcbiAgICAgIHJlYWxUaW1lREIucmVmKGAvcG9sbHMvJHtwb2xsLl9pZH1gKS5yZW1vdmUoKVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdkZWxldGluZyBwb2xsIGZyb20gcmVhbFRpbWVEQicsIGVycilcclxuICAgICAgfSlcclxuICAgICAgY29uc29sZS5sb2coXCJjbG9zZWQgcG9sbCBcIiwgcG9sbC50aXRsZSk7XHJcbiAgICAgIHRoaXMuZ2V0UG9sbHMoKTtcclxuICAgICAgY29uc29sZS5sb2coJ1NhdmVkOiAnLCByZXMuZGF0YSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nsb3NpbmcgUG9sbDogJywgZXJyKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBkZXBsb3kgPSAoaW5kZXgpID0+IHtcclxuICAgIC8vIGZvcm1hdHMgdGhlIHBvbGxcclxuICAgIHZhciBkZXN0cnVjdHVyZWQgPSBkZXN0cnVjdHVyZVBvbGwodGhpcy5zdGF0ZS5maWx0ZXJlZFBvbGxzW2luZGV4XSk7XHJcbiAgICBjb25zb2xlLmxvZygnZGVzdHJ1Y3R1cmVkOiAnLCBkZXN0cnVjdHVyZWQpO1xyXG4gICAgLy8gc2hvdWxkIHNlbmQgcG9sbCB0byBmaXJlc3RvcmVcclxuICAgIGZpcmVwb2xsLnJ1bihkZXN0cnVjdHVyZWQpO1xyXG4gICAgLy8gc2VuZCBkYiByZXF1ZXN0IHRvIHVwZGF0ZSBwb2xsIHRvIGBhY3RpdmVgID0gdHJ1ZSxcclxuICAgIGF4aW9zLnB1dChgL3BvbGxzLyR7ZGVzdHJ1Y3R1cmVkLnBvbGwuX2lkfWAsIHthY3RpdmU6IHRydWV9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygndXBkYXRlZCAnLCBkZXN0cnVjdHVyZWQucG9sbC5kYXRhLnRpdGxlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignVXBkYXRpbmcgcG9sbCBpbiBNb25nb0RCIHRvIGFjdGl2ZTp0cnVlIDonLCBlcnIpXHJcbiAgICB9KTtcclxuICAgIC8vIHNob3VsZCB0cmlnZ2VyIGEgcmVyZW5kZXIgb2YgdGhlIHBvbGxzXHJcbiAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUsIHByb3BzKSA9PiB7XHJcbiAgICAgIHByZXZTdGF0ZS5maWx0ZXJlZFBvbGxzW2luZGV4XS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gcHJldlN0YXRlO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGZpbHRlclBvbGxzID0gKGFjdGl2ZSwgY29tcGxldGVkKSA9PiB7XHJcbiAgICBsZXQgZmlsdGVyZWQgPSB0aGlzLnN0YXRlLmFsbFBvbGxzLmZpbHRlcihwb2xsID0+IHBvbGwuY29tcGxldGVkID09PSBjb21wbGV0ZWQgJiYgcG9sbC5hY3RpdmUgPT09IGFjdGl2ZSk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtmaWx0ZXJlZFBvbGxzOiBmaWx0ZXJlZH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlUG9sbCA9IGlkID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdkZWxldGluZyBwb2xsIHRoYXQgd2FzIGNyZWF0ZWQgYnV0IG5vdCBkZXBsb3llZCEgaWQ6JywgaWQpO1xyXG4gICAgLy8gcmVtb3ZlIGZyb20gbW9uZ28gZGJcclxuICAgIGF4aW9zLmRlbGV0ZShgL3BvbGxzLyR7aWR9YClcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHRoaXMuZ2V0UG9sbHMoKTtcclxuICAgICAgZmlyZXBvbGwudW5zdGFnZShwb2xsSWQpXHJcbiAgICAgICAgLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gdW5zdGFnZVBvbGwgPSBpZCA9PiB7XHJcbiAgLy8gICBmaXJlcG9sbC51bnN0YWdlKHBvbGxJZClcclxuICAvLyAgIC50aGVuKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpXHJcbiAgLy8gICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIC8vIH1cclxuXHJcbiAgaGFuZGxlSW5wdXQoZSkge1xyXG4gICAgY29uc29sZS5sb2coZS50YXJnZXQudmFsdWUpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHVzZXJGaWx0ZXJJbnB1dDogZS50YXJnZXQudmFsdWVcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBsZXQgeyB1c2VyLCBlbWFpbCB9ID0gdGhpcy5wcm9wcztcclxuICAgIGlmICghdXNlcikgcmV0dXJuIDxMaW5rIHRvPVwiL2xvZ2luXCI+PGJ1dHRvbj5Mb2cgSW4hPC9idXR0b24+PC9MaW5rPjtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGlkPVwiZGFzaGJvYXJkXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hdlwiPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0aXRsZSBpcy0xXCI+8J+UpSBXZWxjb21lIHt1c2VyfSE8L2gxPlxyXG4gICAgICAgICAgICAgIHsvKiA8aDEgY2xhc3NOYW1lPVwic3VidGl0bGUgaXMtNFwiPllvdSBhcmUgc2lnbmluZyBpbiB3aXRoIHtlbWFpbH08L2gxPiAqL31cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJkYXNoYm9hcmQtbmF2XCI+XHJcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbGFyZ2UgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmxvZ291dCgpfT5Mb2cgT3V0IFx0Jm5ic3A7IDxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS1zaWduLW91dC1hbHRcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPExpbmsgdG89XCIvY3JlYXRlXCI+PGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbGFyZ2UgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIj5DcmVhdGUgYSBwb2xsISBcdCZuYnNwOzxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhciBmYS1jYWxlbmRhci1wbHVzXCI+PC9pPjwvYnV0dG9uPjwvTGluaz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgaWQ9XCJwb2xscy1maWx0ZXJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbWVkaXVtIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7ZmlsdGVyZWRQb2xsczogdGhpcy5zdGF0ZS5hbGxQb2xsc30pfT5TaG93IEFsbCBQb2xscyBcdCZuYnNwOzxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS1zeW5jLWFsdFwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbWVkaXVtIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gdGhpcy5maWx0ZXJQb2xscyhmYWxzZSwgZmFsc2UpfT5TaG93IE9ubHkgVW5kZXBsb3llZCAmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtcm9ja2V0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1tZWRpdW0gaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLmZpbHRlclBvbGxzKHRydWUsIGZhbHNlKX0+U2hvdyBPbmx5IExpdmUgXHQmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtZmlyZVwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtbWVkaXVtIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gdGhpcy5maWx0ZXJQb2xscyhmYWxzZSwgdHJ1ZSl9PlNob3cgT25seSBDb21wbGV0ZWQgXHQmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtY2FsZW5kYXItY2hlY2tcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG9uQ2hhbmdlID0ge2UgPT4gdGhpcy5oYW5kbGVJbnB1dChlKX0+PC9pbnB1dD5cclxuICAgICAgICAgIDxkaXYgaWQ9XCJwb2xscy1jb250YWluZXJcIj5cclxuICAgICAgICAgICAge3RoaXMuc3RhdGUuZmlsdGVyZWRQb2xscy5tYXAoKHBvbGwsIGkpID0+IHtcclxuICAgICAgICAgICAgICBpZiAocG9sbC50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5zdGF0ZS51c2VyRmlsdGVySW5wdXQudG9Mb3dlckNhc2UoKSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxQb2xsIGtleT17aX0gaW5kZXg9e2l9IHBvbGw9e3BvbGx9IGNsb3NlPXt0aGlzLmNsb3NlfSBkZXBsb3k9e3RoaXMuZGVwbG95fSBkZWxldGVQb2xsPXt0aGlzLmRlbGV0ZVBvbGx9IG9wZW5Nb2RhbD17dGhpcy5vcGVuTW9kYWx9Lz4pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8TW9kYWxcclxuICAgICAgICAgIGlzT3Blbj17dGhpcy5zdGF0ZS5tb2RhbElzT3Blbn1cclxuICAgICAgICAgIG9uQWZ0ZXJPcGVuPXt0aGlzLmFmdGVyT3Blbk1vZGFsfVxyXG4gICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e3RoaXMuY2xvc2VNb2RhbH1cclxuICAgICAgICAgIHN0eWxlPXtjdXN0b21TdHlsZXN9XHJcbiAgICAgICAgICBjb250ZW50TGFiZWw9XCJFeGFtcGxlIE1vZGFsXCJcclxuICAgICAgICA+XHJcbiBcclxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5jbG9zZU1vZGFsfT5jbG9zZTwvYnV0dG9uPlxyXG4gICAgICAgICAgPGgyIHJlZj17c3VidGl0bGUgPT4gdGhpcy5zdWJ0aXRsZSA9IHN1YnRpdGxlfT5QbGVhc2UgaW5wdXQgYW55IG51bWJlcnMgeW91J2QgbGlrZSB0byB0ZXh0ITwvaDI+XHJcbiAgICAgICAgICA8Zm9ybSBpZD1cInRleHQtcG9sbHMtZm9ybVwiIG9uU3VibWl0PXtlID0+IGUucHJldmVudERlZmF1bHQoKX0+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17dGhpcy5zdGF0ZS5waG9uZU51bWJlcnN9IGZvcm09XCJ0ZXh0LXBvbGxzLWZvcm1cIiBjb2xzPVwiNTBcIiByb3dzPVwiNVwiIHBsYWNlaG9sZGVyPVwiWW91IG1heSB1c2UgY29tbWEtc2VwYXJhdGVkIHZhbHVlcyAoYXMgaW4gQ1NWIHNoZWV0IGltcG9ydHMpLCBzdGFydGluZyB3aXRoIHRoZSBhcmVhIGNvZGUuXCIgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7cGhvbmVOdW1iZXJzOiBlLnRhcmdldC52YWx1ZX0pfSAvPlxyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBvbkNsaWNrPXt0aGlzLnNlbmRUZXh0c30+U2VuZCBUZXh0czwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhc2hib2FyZDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFEQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUZBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBYUE7QUFDQTtBQUNBO0FBZkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFvQkE7QUFDQTtBQUNBO0FBdEJBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1QkE7QUE4QkE7QUFDQTtBQUNBO0FBaENBO0FBa0NBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUEzQ0E7QUFnRkE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWhHQTtBQWtHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFySEE7QUF1SEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBMUhBO0FBNEhBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBVUE7QUFDQTs7Ozs7QUFpQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUE2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUxBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQVZBO0FBekJBO0FBMENBOzs7O0FBdE1BO0FBQ0E7QUF3TUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/managementClient/dashboard.jsx\n");

/***/ }),

/***/ "./client/src/managementClient/poll.jsx":
/*!**********************************************!*\
  !*** ./client/src/managementClient/poll.jsx ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(/*! react */ \"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRouterDom = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/es/index.js\");\n\nvar _copyToClipboard = __webpack_require__(/*! copy-to-clipboard */ \"./node_modules/copy-to-clipboard/index.js\");\n\nvar _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);\n\nvar _axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// () => {textLink(linkUrl, prompt('Enter a number to text your link to!'))}\nvar textLink = function textLink(link, phoneNumber) {\n  console.log('texting link to', phoneNumber);\n  // let password = 'rose123';  // implement paywalling later on based on userId\n  if (phoneNumber.length >= 10) {\n    _axios2.default.post('/notifications', { link: link, phoneNumber: phoneNumber }).then(function (data) {\n      return console.log(data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n};\n\nvar Poll = function Poll(props) {\n  var poll = props.poll,\n      deletePoll = props.deletePoll,\n      editPoll = props.editPoll,\n      openModal = props.openModal;\n\n  var deployButton = _react2.default.createElement(\n    'button',\n    { className: 'button is-danger is-rounded is-small is-inverted is-outlined', onClick: function onClick() {\n        return props.deploy(props.index);\n      } },\n    'DEPLOY ',\n    _react2.default.createElement('i', { className: 'fa-fw fas fa-rocket' })\n  );\n  var liveButton = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/live/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'VIEW LIVE ',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-fire' })\n    )\n  );\n  var analyticsButton = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/analytics/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'VIEW ANALYTICS ',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-calendar-check' })\n    )\n  );\n  var closeButton = _react2.default.createElement(\n    'button',\n    { onClick: function onClick() {\n        return props.close(props.index);\n      }, className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n    'CLOSE POLL'\n  );\n  // let status = !poll.active ? 'DEPLOY' : poll.completed ? 'VIEW ANALYTICS' : 'VIEW LIVE';\n  // let statusButton = !poll.active ? deployButton : poll.completed ? analyticsButton : liveButton;\n  var status = poll.completed ? 'VIEW ANALYTICS' : poll.active ? 'VIEW LIVE' : 'DEPLOY';\n  var statusButton = poll.completed ? analyticsButton : poll.active ? liveButton : deployButton;\n  var deletePollButton = _react2.default.createElement(\n    'button',\n    { className: 'button is-danger is-rounded is-small is-inverted is-outlined', onClick: function onClick() {\n        return deletePoll(poll._id);\n      } },\n    'DELETE\\xA0',\n    _react2.default.createElement('i', { className: 'fa-fw fas fa-trash' })\n  );\n  var UndeployedEdit = _react2.default.createElement(\n    _reactRouterDom.Link,\n    { to: '/edit/' + poll._id },\n    _react2.default.createElement(\n      'button',\n      { className: 'button is-danger is-rounded is-small is-inverted is-outlined' },\n      'EDIT\\xA0',\n      _react2.default.createElement('i', { className: 'fa-fw fas fa-edit' })\n    )\n  );\n  // let completedDelete = <button onClick={() => deletePoll(poll._id)}>DELETE POLL</button>;\n  // let deleteButton = poll.completed ? completedDelete : poll.active ? '' : undeployedDelete;\n  var linkUrl = 'https://firepoll.herokuapp.com/response/' + poll._id;\n  return _react2.default.createElement(\n    'div',\n    { className: 'poll-item' },\n    _react2.default.createElement(\n      'div',\n      { className: 'dashboard-options' },\n      _react2.default.createElement(\n        'div',\n        { className: 'response-url' },\n        _react2.default.createElement(\n          'button',\n          { className: 'button is-danger is-rounded is-inverted is-outlined', onClick: function onClick() {\n              return (0, _copyToClipboard2.default)(linkUrl);\n            } },\n          'Copy Link to Vote\\xA0',\n          _react2.default.createElement('i', { className: 'far fa-clipboard' })\n        ),\n        _react2.default.createElement(\n          'button',\n          { className: 'button is-danger is-rounded is-inverted is-outlined' },\n          _react2.default.createElement(\n            'a',\n            { href: 'mailto:?subject=Vote in this Fire Poll!&body=Here is a link to your fire poll!%0D%0A\\n            ' + linkUrl + '%0D%0A\\n            Thanks for voting!' },\n            'Email Link\\xA0',\n            _react2.default.createElement('i', { className: 'far fa-envelope' })\n          )\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: openModal, className: 'button is-danger is-rounded is-inverted is-outlined' },\n          'Text Link'\n        )\n      ),\n      _react2.default.createElement(\n        'div',\n        { className: 'dashboard-options-group' },\n        statusButton,\n        poll.active && closeButton,\n        status === 'DEPLOY' && deletePollButton,\n        status === 'DEPLOY' && UndeployedEdit,\n        status === 'VIEW ANALYTICS' && deletePollButton\n      )\n    ),\n    '\\u200B',\n    _react2.default.createElement('hr', null),\n    _react2.default.createElement(\n      'h1',\n      { className: 'title is-3' },\n      poll.title\n    ),\n    _react2.default.createElement(\n      'div',\n      { className: 'questions-box' },\n      poll.questions.map(function (question) {\n        return _react2.default.createElement(\n          'p',\n          { key: question._id },\n          question.question\n        );\n      })\n    )\n  );\n};\n\nexports.default = Poll;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL21hbmFnZW1lbnRDbGllbnQvcG9sbC5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L3NyYy9tYW5hZ2VtZW50Q2xpZW50L3BvbGwuanN4PzRiN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgY29weSBmcm9tICdjb3B5LXRvLWNsaXBib2FyZCc7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbi8vICgpID0+IHt0ZXh0TGluayhsaW5rVXJsLCBwcm9tcHQoJ0VudGVyIGEgbnVtYmVyIHRvIHRleHQgeW91ciBsaW5rIHRvIScpKX1cclxuY29uc3QgdGV4dExpbmsgPSAobGluaywgcGhvbmVOdW1iZXIpID0+IHtcclxuICBjb25zb2xlLmxvZygndGV4dGluZyBsaW5rIHRvJywgcGhvbmVOdW1iZXIpO1xyXG4gIC8vIGxldCBwYXNzd29yZCA9ICdyb3NlMTIzJzsgIC8vIGltcGxlbWVudCBwYXl3YWxsaW5nIGxhdGVyIG9uIGJhc2VkIG9uIHVzZXJJZFxyXG4gIGlmIChwaG9uZU51bWJlci5sZW5ndGggPj0gMTApIHtcclxuICAgIGF4aW9zLnBvc3QoJy9ub3RpZmljYXRpb25zJywge2xpbmssIHBob25lTnVtYmVyfSlcclxuICAgIC50aGVuKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgUG9sbCA9IChwcm9wcykgPT4ge1xyXG4gIGxldCB7cG9sbCwgZGVsZXRlUG9sbCwgZWRpdFBvbGwsIG9wZW5Nb2RhbH0gPSBwcm9wcztcclxuICBsZXQgZGVwbG95QnV0dG9uID0gKDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLXNtYWxsIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCIgb25DbGljaz17KCkgPT4gcHJvcHMuZGVwbG95KHByb3BzLmluZGV4KX0+REVQTE9ZIDxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS1yb2NrZXRcIj48L2k+PC9idXR0b24+KTtcclxuICBsZXQgbGl2ZUJ1dHRvbiA9ICg8TGluayB0bz17YC9saXZlLyR7cG9sbC5faWR9YH0+PGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtc21hbGwgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIj5WSUVXIExJVkUgPGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLWZpcmVcIj48L2k+PC9idXR0b24+PC9MaW5rPik7XHJcbiAgbGV0IGFuYWx5dGljc0J1dHRvbiA9ICg8TGluayB0bz17YC9hbmFseXRpY3MvJHtwb2xsLl9pZH1gfT48YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1zbWFsbCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiPlZJRVcgQU5BTFlUSUNTIDxpIGNsYXNzTmFtZT1cImZhLWZ3IGZhcyBmYS1jYWxlbmRhci1jaGVja1wiPjwvaT48L2J1dHRvbj48L0xpbms+KTtcclxuICBsZXQgY2xvc2VCdXR0b24gPSA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHByb3BzLmNsb3NlKHByb3BzLmluZGV4KX0gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLXNtYWxsIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCI+Q0xPU0UgUE9MTDwvYnV0dG9uPlxyXG4gIC8vIGxldCBzdGF0dXMgPSAhcG9sbC5hY3RpdmUgPyAnREVQTE9ZJyA6IHBvbGwuY29tcGxldGVkID8gJ1ZJRVcgQU5BTFlUSUNTJyA6ICdWSUVXIExJVkUnO1xyXG4gIC8vIGxldCBzdGF0dXNCdXR0b24gPSAhcG9sbC5hY3RpdmUgPyBkZXBsb3lCdXR0b24gOiBwb2xsLmNvbXBsZXRlZCA/IGFuYWx5dGljc0J1dHRvbiA6IGxpdmVCdXR0b247XHJcbiAgbGV0IHN0YXR1cyA9IHBvbGwuY29tcGxldGVkID8gJ1ZJRVcgQU5BTFlUSUNTJyA6IHBvbGwuYWN0aXZlID8gJ1ZJRVcgTElWRScgOiAnREVQTE9ZJztcclxuICBsZXQgc3RhdHVzQnV0dG9uID0gcG9sbC5jb21wbGV0ZWQgPyBhbmFseXRpY3NCdXR0b24gOiBwb2xsLmFjdGl2ZSA/IGxpdmVCdXR0b24gOiBkZXBsb3lCdXR0b247XHJcbiAgbGV0IGRlbGV0ZVBvbGxCdXR0b24gPSAoPGJ1dHRvbiBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtc21hbGwgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIiBvbkNsaWNrPXsoKSA9PiBkZWxldGVQb2xsKHBvbGwuX2lkKX0+REVMRVRFJm5ic3A7PGkgY2xhc3NOYW1lPVwiZmEtZncgZmFzIGZhLXRyYXNoXCI+PC9pPjwvYnV0dG9uPik7XHJcbiAgbGV0IFVuZGVwbG95ZWRFZGl0ID0gKDxMaW5rIHRvPXtgL2VkaXQvJHtwb2xsLl9pZH1gfT5cclxuICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1zbWFsbCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiPkVESVQmbmJzcDs8aSBjbGFzc05hbWU9XCJmYS1mdyBmYXMgZmEtZWRpdFwiPjwvaT48L2J1dHRvbj5cclxuICA8L0xpbms+KTtcclxuICAvLyBsZXQgY29tcGxldGVkRGVsZXRlID0gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBkZWxldGVQb2xsKHBvbGwuX2lkKX0+REVMRVRFIFBPTEw8L2J1dHRvbj47XHJcbiAgLy8gbGV0IGRlbGV0ZUJ1dHRvbiA9IHBvbGwuY29tcGxldGVkID8gY29tcGxldGVkRGVsZXRlIDogcG9sbC5hY3RpdmUgPyAnJyA6IHVuZGVwbG95ZWREZWxldGU7XHJcbiAgbGV0IGxpbmtVcmwgPSBgaHR0cHM6Ly9maXJlcG9sbC5oZXJva3VhcHAuY29tL3Jlc3BvbnNlLyR7cG9sbC5faWR9YDtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwb2xsLWl0ZW1cIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXNoYm9hcmQtb3B0aW9uc1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVzcG9uc2UtdXJsXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtcm91bmRlZCBpcy1pbnZlcnRlZCBpcy1vdXRsaW5lZFwiIG9uQ2xpY2s9eygpID0+IGNvcHkobGlua1VybCl9PkNvcHkgTGluayB0byBWb3RlJm5ic3A7PGkgY2xhc3NOYW1lPVwiZmFyIGZhLWNsaXBib2FyZFwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1yb3VuZGVkIGlzLWludmVydGVkIGlzLW91dGxpbmVkXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86P3N1YmplY3Q9Vm90ZSBpbiB0aGlzIEZpcmUgUG9sbCEmYm9keT1IZXJlIGlzIGEgbGluayB0byB5b3VyIGZpcmUgcG9sbCElMEQlMEFcclxuICAgICAgICAgICAgJHtsaW5rVXJsfSUwRCUwQVxyXG4gICAgICAgICAgICBUaGFua3MgZm9yIHZvdGluZyFgfSA+RW1haWwgTGluayZuYnNwOzxpIGNsYXNzTmFtZT1cImZhciBmYS1lbnZlbG9wZVwiPjwvaT48L2E+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17b3Blbk1vZGFsfSBjbGFzc05hbWU9XCJidXR0b24gaXMtZGFuZ2VyIGlzLXJvdW5kZWQgaXMtaW52ZXJ0ZWQgaXMtb3V0bGluZWRcIj5UZXh0IExpbms8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhc2hib2FyZC1vcHRpb25zLWdyb3VwXCI+XHJcbiAgICAgICAgICB7c3RhdHVzQnV0dG9ufVxyXG4gICAgICAgICAge3BvbGwuYWN0aXZlICYmIGNsb3NlQnV0dG9ufVxyXG4gICAgICAgICAge3N0YXR1cyA9PT0gJ0RFUExPWScgJiYgZGVsZXRlUG9sbEJ1dHRvbn1cclxuICAgICAgICAgIHtzdGF0dXMgPT09ICdERVBMT1knICYmIFVuZGVwbG95ZWRFZGl0fVxyXG4gICAgICAgICAge3N0YXR1cyA9PT0gJ1ZJRVcgQU5BTFlUSUNTJyAmJiBkZWxldGVQb2xsQnV0dG9ufVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJiM4MjAzO1xyXG4gICAgICA8aHIgLz5cclxuXHJcbiAgICAgIDxoMSBjbGFzc05hbWU9XCJ0aXRsZSBpcy0zXCI+e3BvbGwudGl0bGV9PC9oMT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJxdWVzdGlvbnMtYm94XCI+XHJcbiAgICAgICAge3BvbGwucXVlc3Rpb25zLm1hcChxdWVzdGlvbiA9PiA8cCBrZXk9e3F1ZXN0aW9uLl9pZH0+e3F1ZXN0aW9uLnF1ZXN0aW9ufTwvcD4pfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn0gXHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb2xsOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFWQTtBQURBO0FBb0JBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUF2QkE7QUE2QkE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/managementClient/poll.jsx\n");

/***/ })

}]);